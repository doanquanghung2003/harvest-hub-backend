<mxfile host="65bd71144e">
    <diagram id="activityLogin" name="Hoạt động - Đăng nhập">
        <mxGraphModel dx="936" dy="774" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1100" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="boundary" value="Luồng hoạt động đăng nhập" style="swimlane;childLayout=stackLayout;horizontal=0;rounded=1;whiteSpace=wrap;html=1;fontSize=16;strokeColor=#6c8ebf;fillColor=#ffffff;" parent="1" vertex="1">
                    <mxGeometry x="260" y="100" width="980" height="900" as="geometry"/>
                </mxCell>
                <mxCell id="swim_user" value="Người dùng" style="swimlane;childLayout=stackLayout;horizontal=0;startSize=40;horizontalStack=0;resizeParent=1;expand=1;rounded=0;html=1;fontSize=14;strokeColor=#6c8ebf;fillColor=#f5f5f5;" parent="boundary" vertex="1">
                    <mxGeometry x="60" y="80" width="420" height="800" as="geometry"/>
                </mxCell>
                <mxCell id="start" value="Bắt đầu" style="ellipse;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="swim_user" vertex="1">
                    <mxGeometry x="160" y="20" width="140" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="step_open" value="Mở trang đăng nhập" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#6c8ebf;fillColor=#dae8fc;" parent="swim_user" vertex="1">
                    <mxGeometry x="60" y="80" width="300" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="step_enter_login" value="Nhập username + mật khẩu" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#6c8ebf;fillColor=#dae8fc;" parent="swim_user" vertex="1">
                    <mxGeometry x="60" y="160" width="300" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="decision_mfa" value="Bật bảo mật 2 lớp?" style="rhombus;whiteSpace=wrap;html=1;strokeColor=#b85450;fillColor=#f8cecc;" parent="swim_user" vertex="1">
                    <mxGeometry x="160" y="240" width="140" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="step_enter_otp" value="Nhập mã OTP 2 lớp" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#b85450;fillColor=#f8cecc;" parent="swim_user" vertex="1">
                    <mxGeometry x="60" y="340" width="300" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="step_submit_login" value="Gửi yêu cầu đăng nhập" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#6c8ebf;fillColor=#dae8fc;" parent="swim_user" vertex="1">
                    <mxGeometry x="60" y="420" width="300" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="system_dashboard" value="Chuyển hướng đến dashboard" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#6c8ebf;fillColor=#ffffff;" parent="swim_user" vertex="1">
                    <mxGeometry x="60" y="500" width="300" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="edge_start_open" style="endArrow=classic;html=1;strokeColor=#6c8ebf;" parent="swim_user" source="start" target="step_open" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="edge_open_enter" style="endArrow=classic;html=1;strokeColor=#6c8ebf;" parent="swim_user" source="step_open" target="step_enter_login" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="edge_enter_decision" style="endArrow=classic;html=1;strokeColor=#6c8ebf;" parent="swim_user" source="step_enter_login" target="decision_mfa" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="edge_decision_mfa_yes" value="Có" style="endArrow=classic;html=1;strokeColor=#b85450;" parent="swim_user" source="decision_mfa" target="step_enter_otp" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="edge_decision_mfa_no" value="Không" style="endArrow=classic;html=1;strokeColor=#666666;" parent="swim_user" source="decision_mfa" target="step_submit_login" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="edge_otp_submit" style="endArrow=classic;html=1;strokeColor=#6c8ebf;" parent="swim_user" source="step_enter_otp" target="step_submit_login" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="swim_system" value="Hệ thống Harvest Hub" style="swimlane;childLayout=stackLayout;horizontal=0;startSize=40;horizontalStack=0;resizeParent=1;expand=1;rounded=0;html=1;fontSize=14;strokeColor=#82b366;fillColor=#ffffff;" parent="boundary" vertex="1">
                    <mxGeometry x="540" y="80" width="420" height="800" as="geometry"/>
                </mxCell>
                <mxCell id="system_receive" value="Nhận dữ liệu đăng nhập" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#6c8ebf;fillColor=#ffffff;" parent="swim_system" vertex="1">
                    <mxGeometry x="60" y="300" width="300" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="system_validate" value="Kiểm tra hợp lệ (format)" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#6c8ebf;fillColor=#dae8fc;" parent="swim_system" vertex="1">
                    <mxGeometry x="60" y="500" width="300" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="system_sendOTP" value="Gửi OTP 2 lớp (nếu bật)" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#b85450;fillColor=#f8cecc;" parent="swim_system" vertex="1">
                    <mxGeometry x="60" y="340" width="300" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="system_login" value="Xác thực thông tin đăng nhập" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#6c8ebf;fillColor=#dae8fc;" parent="swim_system" vertex="1">
                    <mxGeometry x="60" y="420" width="300" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="system_check_lockout" value="Kiểm tra tài khoản bị khóa" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#b85450;fillColor=#f8cecc;" parent="swim_system" vertex="1">
                    <mxGeometry x="60" y="580" width="300" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="system_issue_token" value="Phát hành JWT token" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#9673a6;fillColor=#e1d5e7;" parent="swim_system" vertex="1">
                    <mxGeometry x="60" y="660" width="300" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="system_audit" value="Ghi log &amp; cập nhật trạng thái đăng nhập" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#666666;fillColor=#f5f5f5;" parent="swim_system" vertex="1">
                    <mxGeometry x="60" y="740" width="300" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="end" value="Kết thúc" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;" parent="swim_system" vertex="1">
                    <mxGeometry x="170" y="820" width="140" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="edge_system_receive_validate" style="endArrow=classic;html=1;strokeColor=#6c8ebf;" parent="swim_system" source="system_receive" target="system_validate" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="edge_validate_otp" value="Có 2FA" style="endArrow=classic;html=1;strokeColor=#b85450;" parent="swim_system" source="system_validate" target="system_sendOTP" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="edge_validate_login" value="Không 2FA" style="endArrow=classic;html=1;strokeColor=#6c8ebf;" parent="swim_system" source="system_validate" target="system_login" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="edge_otp_login" style="endArrow=classic;html=1;strokeColor=#6c8ebf;" parent="swim_system" source="system_sendOTP" target="system_login" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="edge_login_lockout" style="endArrow=classic;html=1;strokeColor=#b85450;" parent="swim_system" source="system_login" target="system_check_lockout" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="edge_lockout_token" style="endArrow=classic;html=1;strokeColor=#9673a6;" parent="swim_system" source="system_check_lockout" target="system_issue_token" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="edge_token_audit" style="endArrow=classic;html=1;strokeColor=#666666;" parent="swim_system" source="system_issue_token" target="system_audit" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="edge_audit_end" style="endArrow=classic;html=1;strokeColor=#666666;" parent="swim_system" source="system_audit" target="end" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="edge_submit_systemReceive" style="edgeStyle=orthogonalEdgeStyle;endArrow=classic;html=1;strokeColor=#6c8ebf;entryX=0;entryY=0.5;exitX=1;exitY=0.5;" parent="boundary" source="step_submit_login" target="system_receive" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="edge_audit_dashboard" style="edgeStyle=orthogonalEdgeStyle;endArrow=classic;html=1;strokeColor=#6c8ebf;entryX=1;entryY=0.5;exitX=0;exitY=0.5;" parent="boundary" source="system_audit" target="system_dashboard" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="edge_dashboard_end" style="edgeStyle=orthogonalEdgeStyle;endArrow=classic;html=1;strokeColor=#666666;entryX=0.5;entryY=0;exitX=0.5;exitY=1;" parent="boundary" source="system_dashboard" target="end" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="edge_systemSendOTP_userEnterOTP" style="edgeStyle=orthogonalEdgeStyle;endArrow=classic;html=1;strokeColor=#b85450;entryX=1;entryY=0.5;exitX=0;exitY=0.5;" parent="boundary" source="system_sendOTP" target="step_enter_otp" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>
